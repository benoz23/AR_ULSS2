<!DOCTYPE html>
<html>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        AFRAME.registerComponent('smooth-motion', {
            schema: {
                alpha: { default: 0.2 },
                rotationAlpha: { default: 0.2 }
            },
            init: function () {
                this.currentPosition = new THREE.Vector3();
                this.currentRotation = new THREE.Euler();

                this.el.addEventListener('componentchanged', (event) => {
                    if (event.detail.name === 'position') {
                        // Smooth position
                        this.currentPosition.lerp(this.el.getAttribute('position'), this.data.alpha);
                        this.el.setAttribute('position', this.currentPosition);
                    }
                    if (event.detail.name === 'rotation') {
                        // Smooth rotation
                        this.currentRotation.lerp(this.el.getAttribute('rotation'), this.data.rotationAlpha);
                        this.el.setAttribute('rotation', this.currentRotation);
                    }
                });
            }
        });
    </script>
    <body style="margin : 0px; overflow: hidden;">
        <a-scene embedded arjs>
        <a-marker preset="hiro">
            <!-- we use cors proxy to avoid cross-origin problems ATTENTION! you need to set up your server -->
            <a-entity
            position="0 0 0"
            scale="3 3 3"
            gltf-model="1b_percorsi.gltf"
            ></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
        </a-scene>
    </body>
</html>

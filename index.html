<!DOCTYPE html>
<html>
    <head>
        <title>ULSS 2 - I percorsi del Pronto Soccorso</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
        <link href='https://fonts.googleapis.com/css?family=Titillium Web' rel='stylesheet'>
        <link rel="stylesheet" href="styles.css" />
        <script src='https://cdn.jsdelivr.net/npm/webxr-polyfill@latest/build/webxr-polyfill.js'></script>
        <script src="https://kit.fontawesome.com/1bbfd0af93.js" crossorigin="anonymous"></script>
        <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
        <!--<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>-->
        <!--<script src="gestures.js"></script>-->
    </head>
    <body style="margin: 0px; overflow: hidden;">
        <script>
            // This script will be executed immediately after the plain HTML has loaded
            document.addEventListener('DOMContentLoaded', function() {
            // Get the container and camera elements
            const container = document.querySelector('#container');
            const camera = document.querySelector('#camera');
            
            // Get all container children
            const containerChildren = container.querySelectorAll('.container-child');
            
            // Disable prev and next buttons before the check is done
            document.getElementById('prev-button').disabled = true;
            document.getElementById('next-button').disabled = true;
            
            // Check for children with width > height
            for (const child of containerChildren) {
                const childWidth = child.offsetWidth;
                const childHeight = child.offsetHeight;
            
                if (childWidth > childHeight) {
                    // Create two auxiliary empty a-entity elements
                    const aux1 = document.createElement('a-entity');
                    aux1.classList.add('container-child');
            
                    const aux2 = document.createElement('a-entity');
                    aux2.classList.add('container-child');
            
                    // Set the positions of the auxiliary entities
                    const childPosition = child.getAttribute('position');
                    const childX = parseFloat(childPosition.x);
                    const childY = parseFloat(childPosition.y);
                    const childZ = parseFloat(childPosition.z);
            
                    aux1.setAttribute('position', `${childX - childWidth / 6} ${childY} ${childZ + 0.175}`);
                    aux2.setAttribute('position', `${childX + childWidth / 6} ${childY} ${childZ + 0.175}`);
            
                    // Insert the auxiliary entities into the container
                    container.insertBefore(aux1, child.nextSibling);
                    container.insertBefore(aux2, child.nextSibling);
                }
            }
                        });
        </script>
        <a class="top-bar" href="https://www.aulss2.veneto.it">
            <img class="logo" src="img/ULSS_2_logo.svg" alt="Azienda ULSS2 - Marca Trevigiana">
        </a>
        <!--<div class="bot-bar">
            <button id="prev-button" onclick="prev"><i class="fa-solid fa-caret-left"></i></button> 
            <p><a href="https://www.aulss2.veneto.it">Per maggiori informazioni<br /><strong>VISITA IL SITO DELL'ULSS2</strong></a></p>
            <button id="next-button" onclick="next"><i class="fa-solid fa-caret-right"></i></button>
        </div>-->
        <!--<a-scene
            embedded
            arjs="sourceType: webcam; sourceWidth: 2560; sourceHeight: 1920; displayWidth: 2560; displayHeight: 1920;"
            renderer="logarithmicDepthBuffer: true;"
            vr-mode-ui="enabled: false"
            gesture-detector
            id="scene">-->
        <button id="prev-button" onclick="prev"><i class="fa-solid fa-caret-left"></i></button> 
        <button id="next-button" onclick="next"><i class="fa-solid fa-caret-right"></i></button>
        <a-scene
            id="scene"
            loading-screen="false">
            <a-assets>
                <img id="1_percorsi" src="img/1_percorsi_2x1.png">
                <img id="2_triage" src="img/2_triage_7x10.png">
            </a-assets>
            <a-entity id="container">
                <a-image id="img-1" class="container-child" src="#1_percorsi" width="0.5" height="0.25" position="0 1.525 0" rotation="-45 0 0" active-child></a-image>
                <a-image id="img-2" class="container-child" src="#2_triage" width="0.175" height="0.25" position="0.425 1.525 0" rotation="-45 0 0"></a-image>
                <a-image id="img-3" class="container-child" src="#2_triage" width="0.175" height="0.25" position="0.625 1.525 0" rotation="-45 0 0"></a-image>
            </a-entity>
            <!--<a-entity position="0 1.525 0">
                <a-image id="img-1" src="#1_percorsi" width="0.5" height="0.25" position="0 0 -0.15" rotation="-45 0 0"></a-image>
            </a-entity>
            <a-entity position="0 1.525 0" rotation="0 -30 0">
                <a-image id="img-2" src="#2_triage" width="0.175" height="0.25" position="0 0 -0.15" rotation="-45 0 0"></a-image>
            </a-entity>-->
            
            <!--<a-ring position="0 1.525 -0" radius-inner="0.15" radius-outer="0.3" src="#1_percorsi"></a-ring>-->
        
            <a-camera
                id="camera"
                position="-0.175 1.6 0.15"></a-camera>
        </a-scene>
        <script src="main.js"></script>
    </body>
</html>
